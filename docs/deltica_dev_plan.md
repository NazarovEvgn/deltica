# План разработки Deltica

## Тестирование
- В роли лаборанта:
  - Рассмотреть к доработке: 
    - при авторизации сохранять вход на какое-нибудь время, чтобы при последующем запуске не входить заново.
    - при нажатии на раздел дашборда получать данные в таблице. Пример: нажал на число просроченных и таблица отфильтровалась по статусу.
- В роли администратора:
  - Рассмотреть к доработке: 
    - Возможность откатиться на действие назад.

- Прогнать все unit-тесты.

### 2. Документация

**Пользовательская документация:**
- [ ] Руководство пользователя (для лаборантов)
  - Вход в систему
  - Просмотр оборудования своего отдела
  - Работа с таблицей (поиск, сортировка)
  - Просмотр файлов и закрепленных документов
- [ ] Руководство администратора
  - Управление пользователями через YAML
  - Добавление/редактирование/архивирование оборудования
  - Загрузка файлов и документов
  - Создание резервных копий
  - Работа с архивом
  - Мониторинг системы

**Техническая документация:**
- [ ] Инструкция по развертыванию на сервере
  - Системные требования
  - Установка зависимостей (Python, Node.js, PostgreSQL)
  - Настройка базы данных
  - Настройка переменных окружения (.env)
  - Миграции базы данных (Alembic)
  - Создание первых пользователей
  - Настройка systemd сервисов (для автозапуска)
  - Настройка nginx (reverse proxy)
- [ ] Инструкция по разработке
  - Структура проекта
  - Локальная разработка (start.ps1, start.bat)
  - Запуск тестов
  - Создание миграций
  - Добавление новых эндпоинтов
  - Работа с RevoGrid
- [ ] API документация (дополнение к Swagger UI)
  - Описание всех эндпоинтов
  - Примеры запросов/ответов
  - Описание схем данных
  - Обработка ошибок

**Операционная документация:**
- [ ] Процедуры резервного копирования и восстановления
- [ ] Процедуры обновления приложения
- [ ] Troubleshooting (типичные проблемы и решения)
- [ ] Процедуры масштабирования (если потребуется)

### 3. Docker контейнеризация

**Описание:** Упаковка приложения в Docker контейнеры для упрощенного деплоя

**Задачи:**
- [ ] Создать Dockerfile для backend (Python + FastAPI)
  - Multi-stage build для оптимизации размера
  - Использование uv для управления зависимостями
  - Настройка рабочего окружения
- [ ] Создать Dockerfile для frontend (Nginx + статика)
  - Build этап (npm run build)
  - Production этап (nginx для раздачи статики)
  - Настройка nginx.conf
- [ ] Создать docker-compose.yml
  - Сервис PostgreSQL
  - Сервис Backend (FastAPI)
  - Сервис Frontend (Nginx)
  - Volumes для персистентности данных (БД, файлы, логи, backup)
  - Networks для изоляции
  - Health checks
- [ ] Настроить переменные окружения
  - .env.example для Docker окружения
  - Secrets для продакшена
- [ ] Создать скрипты для управления
  - docker-deploy.sh (запуск)
  - docker-backup.sh (резервное копирование)
  - docker-restore.sh (восстановление)
  - docker-update.sh (обновление версии)
- [ ] Документация по Docker деплою
  - Инструкция по установке Docker
  - Запуск приложения через docker-compose
  - Настройка volumes и бэкапов
  - Обновление контейнеров

**Преимущества Docker:**
- Упрощенный деплой на любой сервер с Docker
- Изолированное окружение
- Легкое масштабирование
- Воспроизводимость окружения разработки/продакшена

---

## Архитектурные заметки

**Текущая архитектура:**
- Монолитное приложение (Backend + Frontend)
- Backend: FastAPI + SQLAlchemy + PostgreSQL
- Frontend: Vue 3 + Vite + Naive UI + RevoGrid
- Аутентификация: JWT tokens (localStorage)
- Файловое хранилище: локальная FS (backend/uploads/)

**Рекомендации для масштабирования:**
- Вынести файлы на объектное хранилище (S3/MinIO)
- Добавить очередь задач (Celery + Redis) для фоновых операций
- Разделить Backend API и Worker процессы
- Настроить CDN для статики Frontend
- Horizontal scaling через load balancer (если потребуется)

